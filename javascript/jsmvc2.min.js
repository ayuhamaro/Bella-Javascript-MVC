var Jsmvc2=function BellaJMVC2(){this.Ctrl={o:this};this.CallBack={o:this};this.Model=function(c,e,d,a){if(typeof(d)=="undefined"){d={}}if(typeof(e)=="undefined"){e=null}var b=this;$.ajax({type:"POST",url:c,data:d,dataType:"json",success:function(f){if(typeof(f)!=="object"){f=$.parseJSON(r)}if(e!==null){b.CallBack[e](f,a)}},error:function(f){console.log(f)}})};this.View=function(c,b,e,d){var a=this;$.ajax({type:"GET",url:c,dataType:"html",success:function(g){var f=a.Render(g,b,e);if(typeof(d)!=="undefined"){d(f)}},error:function(f){console.log(f)}})};this.Render=function(c,j,g){c=c.replace(/\t/g,"");c=c.replace(/\n/g,"");c=c.replace(/\r/g,"");if(j===null&&g==={}){return c}var m=function(q,w){var p=q.attr("be-list");if(typeof(w[p])!=="object"){q.empty();return false}if(w[p].length===0){q.empty();return false}var v=q.html();var y=v.match(/\{\{(.*?)\}\}/g);if(y!==null){y=$.map(y,function(C){var B=new RegExp("\\{\\{"+p+"\\.(.*?)\\}\\}");C=B.exec(C);return C[1]})}var s=[];for(var x in w[p][0]){s.push(x)}q.empty();for(var z in w[p]){var u=v;if(y!==null){for(var A in s){if($.inArray(s[A],y)!==-1){u=u.replace(new RegExp("\\{\\{"+p+"\\."+s[A]+"\\}\\}","g"),w[p][z][s[A]])}}}q.append(u);var o=q.children().last();for(var A in s){var t=o.find("[be-value='"+p+"."+s[A]+"']");if(t.length>0){t.html(w[p][z][s[A]])}}}return true};var n=[];for(var k in g){if(typeof(g[k])!=="object"){n.push(k)}}for(var i in n){var f=c.match(new RegExp("\\{\\{"+n[i]+"\\}\\}"));if(f!==null){c=c.replace(new RegExp("\\{\\{"+n[i]+"\\}\\}","g"),g[n[i]])}}if(j===null){return c}var e=$("#"+j);e.html(c);for(var i in n){var l=e.find("[be-value="+n[i]+"]");if(l.length>0){l.html(g[n[i]])}}var d=[];var h=e.find("[be-list]");h.each(function(){var o=$(this).attr("be-list");if($.inArray(o,d)===-1){d.push(o)}});for(var b in d){var a=e.find("[be-list="+d[b]+"]");a.each(function(){m($(this),g)})}return e.html()};this.Func={o:this};this.Var={o:this};this.Init=function(){for(var a in this.Ctrl){if(a.substring(0,2)=="__"){this.Ctrl[a]()}}}};
