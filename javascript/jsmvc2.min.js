/***Ver 2.3.0***/var Jsmvc2=function(a){this.Ctrl={};this.CallBack={};this.Var={o:this};$(function(){if(window[a]instanceof Jsmvc2)for(var b in window[a].Ctrl)"function"===typeof window[a].Ctrl[b]&&window[a].Ctrl[b].bind(window[a])()})};
Jsmvc2.prototype.Model=function(a,b,c,e){"undefined"===typeof c&&(c={});var d=this;$.ajax({type:"POST",url:a,data:c,dataType:"json",success:function(a){"undefined"!==typeof b&&null!==b&&("object"!==typeof a&&(a=$.parseJSON(a)),"function"===typeof b?b(a,e):"string"===typeof b&&d.CallBack[b].bind(d)(a,e))},error:function(a){console.log(a)}})};
Jsmvc2.prototype.View=function(a,b,c,e){var d=this;$.ajax({type:"GET",url:a,dataType:"html",success:function(a){a=d.Render(a,b,c);"function"===typeof e&&e(a)},error:function(a){console.log(a)}})};
Jsmvc2.prototype.Render=function(a,b,c){a=a.replace(/\t/g,"");a=a.replace(/\n/g,"");a=a.replace(/\r/g,"");if(null===b&&c==={})return a;var e=function(a,b){var c=a.attr("be-list");if($.isArray(!1===b[c])||0===b[c].length)return a.empty(),!1;var d=a.html(),e=d.match(/\{\{(.*?)\}\}/g);null!==e&&(e=$.map(e,function(a){a=(new RegExp("\\{\\{"+c+"\\.(.*?)\\}\\}")).exec(a);return a[1]}));var g=[],h;for(h in b[c][0])g.push(h);a.empty();for(var f in b[c]){h=d;if(null!==e)for(var l in g)-1!==$.inArray(g[l],
e)&&(h=h.replace(new RegExp("\\{\\{"+c+"\\."+g[l]+"\\}\\}","g"),b[c][f][g[l]]));a.append(h);h=a.children().last();for(l in g){var k=h.find("[be-value='"+c+"."+g[l]+"']");0<k.length&&k.html(b[c][f][g[l]])}}return!0},d=[],m;for(m in c)!1===$.isArray(c[m])&&d.push(m);for(var f in d)null!==a.match(new RegExp("\\{\\{"+d[f]+"\\}\\}"))&&(a=a.replace(new RegExp("\\{\\{"+d[f]+"\\}\\}","g"),c[d[f]]));if(null===b)return a;b=$("#"+b);b.html(a);for(f in d)a=b.find("[be-value="+d[f]+"]"),0<a.length&&a.html(c[d[f]]);
var k=[];b.find("[be-list]").each(function(){var a=$(this).attr("be-list");-1===$.inArray(a,k)&&k.push(a)});for(var n in k)b.find("[be-list="+k[n]+"]").each(function(){e($(this),c)});return b.html()};Jsmvc2.prototype.Func={o:this};Jsmvc2.prototype.Func.enterBindBtnClick=function(a,b){$(a).keydown(function(a){13===a.keyCode&&$("#"+b).click()})};
Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,e=function(){},d=function(){return c.apply(this instanceof e?this:a||this,b.concat(Array.prototype.slice.call(arguments)))};e.prototype=this.prototype;d.prototype=new e;return d});
